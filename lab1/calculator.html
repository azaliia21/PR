<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор - Modern Design</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator-container">
        <div class="control-panel">
            <button class="theme-toggle" onclick="toggleTheme()">Сменить тему</button>
            <a href="https://github.com/azaliia21" class="github-btn" target="_blank">GitHub</a>
        </div>

        <select class="dropdown" onchange="handleSpecialOperation(this)">
            <option value="">Дополнительные операции</option>
            <option value="square">x² - Квадрат</option>
            <option value="sqrt">√ - Квадратный корень</option>
        </select>

        <div class="result" id="result">0</div>

        <!-- Исправленная сетка кнопок согласно скриншоту -->
        <div class="buttons-grid">
            <!-- Первый ряд -->
            <button class="my-btn secondary" id="btn_op_clear">C</button>
            <button class="my-btn secondary" id="btn_op_sign">±</button>
            <button class="my-btn secondary" id="btn_op_percent">%</button>
            <button class="my-btn primary" id="btn_op_div">/</button>

            <!-- Второй ряд -->
            <button class="my-btn" id="btn_digit_7">7</button>
            <button class="my-btn" id="btn_digit_8">8</button>
            <button class="my-btn" id="btn_digit_9">9</button>
            <button class="my-btn primary" id="btn_op_mult">×</button>

            <!-- Третий ряд -->
            <button class="my-btn" id="btn_digit_4">4</button>
            <button class="my-btn" id="btn_digit_5">5</button>
            <button class="my-btn" id="btn_digit_6">6</button>
            <button class="my-btn primary" id="btn_op_minus">-</button>

            <!-- Четвертый ряд -->
            <button class="my-btn" id="btn_digit_1">1</button>
            <button class="my-btn" id="btn_digit_2">2</button>
            <button class="my-btn" id="btn_digit_3">3</button>
            <button class="my-btn primary" id="btn_op_plus">+</button>

            <!-- Пятый ряд -->
            <button class="my-btn" id="btn_digit_0">0</button>
            <button class="my-btn" id="btn_digit_dot">.</button>
            <button class="my-btn primary" id="btn_op_equal">=</button>
        </div>

        <details>
            <summary>Автор</summary>
            <div class="author-info">
                <p><strong>ФИО:</strong> Нургалиева Азалия Азатовна</p>
                <p><strong>Группа:</strong> ИБМ3-54Б</p>
            </div>
        </details>

        <div class="lab-purpose">
            <h3>Цель лабораторной работы</h3>
            <p>
                <span class="highlight">Знакомство</span> с основами веб-разработки, 
                изучение технологий <span class="highlight">HTML</span> и 
                <span class="highlight">CSS</span> для создания интерактивных интерфейсов.
            </p>
        </div>
    </div>

    <div class="signature">ЛР выполнила Нургалиева Азалия Азатовна</div>

    <script>
        let currentInput = '0';
        let previousInput = '';
        let operation = null;
        let resetScreen = false;

        const resultElement = document.getElementById('result');

        function updateDisplay() {
            resultElement.textContent = currentInput;
        }

        // Обработчики для цифровых кнопок
        document.querySelectorAll('[id^="btn_digit_"]').forEach(button => {
            button.addEventListener('click', () => {
                appendNumber(button.textContent);
            });
        });

        // Обработчики для операций
        document.getElementById('btn_op_plus').addEventListener('click', () => setOperation('+'));
        document.getElementById('btn_op_minus').addEventListener('click', () => setOperation('-'));
        document.getElementById('btn_op_mult').addEventListener('click', () => setOperation('*'));
        document.getElementById('btn_op_div').addEventListener('click', () => setOperation('/'));
        document.getElementById('btn_op_equal').addEventListener('click', calculate);
        document.getElementById('btn_op_clear').addEventListener('click', clearCalculator);
        document.getElementById('btn_op_sign').addEventListener('click', toggleSign);
        document.getElementById('btn_op_percent').addEventListener('click', calculatePercentage);
        document.getElementById('btn_digit_dot').addEventListener('click', appendDecimal);

        function appendNumber(number) {
            if (currentInput === '0' || resetScreen) {
                currentInput = number;
                resetScreen = false;
            } else {
                currentInput += number;
            }
            updateDisplay();
        }

        function appendDecimal() {
            if (resetScreen) {
                currentInput = '0.';
                resetScreen = false;
            } else if (!currentInput.includes('.')) {
                currentInput += '.';
            }
            updateDisplay();
        }

        function setOperation(op) {
            if (currentInput === '') return;
            if (previousInput !== '' && operation && !resetScreen) {
                calculate();
            }
            operation = op;
            previousInput = currentInput;
            resetScreen = true;
        }

        function calculate() {
            let computation;
            const prev = parseFloat(previousInput);
            const current = parseFloat(currentInput);
            
            if (isNaN(prev) || isNaN(current)) return;
            
            switch (operation) {
                case '+': computation = prev + current; break;
                case '-': computation = prev - current; break;
                case '*': computation = prev * current; break;
                case '/': computation = prev / current; break;
                default: return;
            }
            
            currentInput = computation.toString();
            operation = null;
            previousInput = '';
            resetScreen = true;
            updateDisplay();
        }

        function clearCalculator() {
            currentInput = '0';
            previousInput = '';
            operation = null;
            updateDisplay();
        }

        function toggleSign() {
            currentInput = (parseFloat(currentInput) * -1).toString();
            updateDisplay();
        }

        function calculatePercentage() {
            currentInput = (parseFloat(currentInput) / 100).toString();
            updateDisplay();
        }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const themeBtn = document.querySelector('.theme-toggle');
            themeBtn.textContent = document.body.classList.contains('light-theme') 
                ? ' Светлая тема' 
                : ' Тёмная тема';
        }

        function handleSpecialOperation(select) {
            if (select.value) {
                alert('Выбрана операция: ' + select.options[select.selectedIndex].text);
                select.value = '';
            }
        }

        updateDisplay();
    </script>
</body>
</html>